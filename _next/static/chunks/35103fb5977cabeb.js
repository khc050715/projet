(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},52683,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(22016);e.i(51718);var r=e.i(18357);e.i(36180);var l=e.i(98925),i=e.i(59141),n=e.i(75254);let c=(0,n.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=e.i(31278);let o=(0,n.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),x=(0,n.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),h=(0,n.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=(0,e.i(70703).default)(()=>e.A(88174),{loadableGenerated:{modules:[72113]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"text-gray-600 h-20 flex items-center",children:"Loading..."})});function m(){let[e,n]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[f,p]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[j,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[k,S]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,r.onAuthStateChanged)(i.auth,e=>{n(e),g(!1)});return()=>e()},[]),(0,a.useEffect)(()=>{if(!e)return;let t=(0,l.query)((0,l.collection)(i.db,"records"),(0,l.orderBy)("created_at","desc")),a=(0,l.onSnapshot)(t,e=>{S(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]);let C=async e=>{e.preventDefault();try{await (0,r.signInWithEmailAndPassword)(i.auth,"your-email@example.com",w)}catch{alert("Code mismatch")}},M=async()=>{if(y.trim()&&e){v(!0);try{await (0,l.addDoc)((0,l.collection)(i.db,"records"),{uid:e.uid,title:f||"Untitled Knot",content:y,created_at:(0,l.serverTimestamp)(),updated_at:(0,l.serverTimestamp)(),status:"active"}),p(""),b("")}catch{alert("Error")}finally{v(!1)}}};return m?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center text-gray-500",children:(0,t.jsx)(d.Loader2,{className:"animate-spin"})}):e?(0,t.jsxs)("main",{className:"projet-container",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center border-b border-gray-800 pb-4",children:[(0,t.jsx)("h1",{className:"text-lg font-bold tracking-[0.2em] text-gray-100",children:"PROJET"}),(0,t.jsx)("button",{onClick:()=>i.auth.signOut(),className:"text-xs text-gray-500 hover:text-white transition-colors",children:"LOCK"})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end px-1",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Quick Log"}),(0,t.jsxs)(s.default,{href:"/write",className:"text-xs text-emerald-500 hover:text-emerald-400 flex items-center gap-1 font-medium",children:[(0,t.jsx)(o,{className:"w-3 h-3"})," Full Mode"]})]}),(0,t.jsxs)("div",{className:"bg-[#111] border border-gray-800 rounded-xl p-5 flex flex-col gap-4 shadow-sm",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title...",className:"bg-transparent text-lg font-bold text-white placeholder-gray-600 border-none outline-none p-0",value:f,onChange:e=>p(e.target.value)}),(0,t.jsxs)("div",{className:"min-h-[120px] -ml-4",children:[" ",(0,t.jsx)(u,{markdown:y,onChange:b})]}),(0,t.jsx)("div",{className:"flex justify-end border-t border-gray-800 pt-3 mt-2",children:(0,t.jsxs)("button",{onClick:M,disabled:j,className:"bg-white text-black px-5 py-2 rounded-lg text-sm font-bold hover:bg-gray-200 disabled:opacity-50 flex items-center gap-2",children:[j?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h,{className:"w-4 h-4"})," Record"]})})]})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-3 flex-1",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest px-1",children:"History"}),k.map(e=>{let a;return(0,t.jsx)(s.default,{href:`/view?id=${e.id}`,className:"block group",children:(0,t.jsxs)("article",{className:"bg-transparent border border-gray-800 rounded-xl p-5 hover:bg-[#111] hover:border-gray-600 transition-all flex justify-between items-center group-hover:translate-x-1 duration-200",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-gray-200 group-hover:text-white transition-colors",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:(a=e.created_at)?new Date(a.toDate()).toLocaleDateString():""})]}),(0,t.jsx)(x,{className:"w-4 h-4 text-gray-700 group-hover:text-white transition-colors"})]})},e.id)}),0===k.length&&(0,t.jsx)("div",{className:"text-center text-gray-600 py-10 text-sm",children:"기록이 시작되지 않았습니다."})]})]}):(0,t.jsx)("main",{className:"h-screen flex flex-col items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-6 text-center",children:[(0,t.jsx)("div",{className:"inline-block p-4 rounded-full bg-gray-900 border border-gray-800",children:(0,t.jsx)(c,{className:"text-gray-400 w-6 h-6"})}),(0,t.jsxs)("form",{onSubmit:C,className:"flex flex-col gap-3",children:[(0,t.jsx)("input",{type:"password",required:!0,className:"w-full bg-gray-900 border border-gray-800 rounded-lg p-3 text-center text-white focus:border-gray-500",placeholder:"Identity Code",value:w,onChange:e=>N(e.target.value)}),(0,t.jsx)("button",{className:"w-full bg-white text-black font-bold p-3 rounded-lg hover:bg-gray-200",children:"Unlock"})]})]})})}e.s(["default",()=>m],52683)},88174,e=>{e.v(t=>Promise.all(["static/chunks/fac2aa90d5f39e2e.js","static/chunks/c0a0c0f35d0a8771.css"].map(t=>e.l(t))).then(()=>t(72113)))}]);