(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},52683,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(22016);e.i(51718);var i=e.i(18357);e.i(36180);var l=e.i(98925),n=e.i(59141),r=e.i(18566),c=e.i(75254);let d=(0,c.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),o=(0,c.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=(0,c.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),h=(0,c.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var u=e.i(31278);let m=(0,e.i(70703).default)(()=>e.A(88174),{loadableGenerated:{modules:[72113]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-20 flex items-center text-zinc-600",children:"Editor Loading..."})});function f(){let{user:e,loading:c}=function(e=!1){let[t,s]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),d=(0,r.useRouter)();return(0,a.useEffect)(()=>{let t=(0,i.onAuthStateChanged)(n.auth,t=>{s(t),c(!1),e&&!t&&d.push("/")});return()=>t()},[e,d]),{user:t,loading:l}}(),[f,p]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),z=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!e)return;let t=(0,l.query)((0,l.collection)(n.db,"records"),(0,l.orderBy)("created_at","desc"));return(0,l.onSnapshot)(t,e=>{k(e.docs.map(e=>({id:e.id,...e.data()})))})},[e]);let S=async e=>{e.preventDefault();try{await (0,i.signInWithEmailAndPassword)(n.auth,"your-email@example.com",v)}catch{alert("코드가 올바르지 않습니다.")}},T=async()=>{if(b.trim()&&e){w(!0);try{await (0,l.addDoc)((0,l.collection)(n.db,"records"),{uid:e.uid,title:f||"Untitled Knot",content:b,created_at:(0,l.serverTimestamp)(),updated_at:(0,l.serverTimestamp)(),status:"active"}),p(""),g(""),z.current?.setMarkdown("")}catch{alert("저장 실패")}finally{w(!1)}}};return c?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center text-zinc-500",children:(0,t.jsx)(u.Loader2,{className:"animate-spin"})}):e?(0,t.jsxs)("main",{className:"projet-container animate-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center pb-2 border-b border-zinc-800/50",children:[(0,t.jsx)("h1",{className:"text-sm font-bold tracking-[0.3em] text-zinc-100",children:"PROJET"}),(0,t.jsx)("button",{onClick:()=>n.auth.signOut(),className:"text-xs text-zinc-500 hover:text-white transition-colors uppercase tracking-wider",children:"Lock"})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end px-1",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest",children:"Quick Log"}),(0,t.jsxs)(s.default,{href:"/write",className:"text-xs text-amber-500 hover:text-amber-400 flex items-center gap-1 font-medium transition-colors",children:[(0,t.jsx)(h,{className:"w-3 h-3"})," Expand"]})]}),(0,t.jsxs)("div",{className:"card flex flex-col gap-4 bg-zinc-900/50",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title of existence...",className:"bg-transparent text-lg font-bold text-white placeholder-zinc-700 border-none outline-none p-0",value:f,onChange:e=>p(e.target.value)}),(0,t.jsx)("div",{className:"min-h-25 -ml-4",children:(0,t.jsx)(m,{ref:z,markdown:b,onChange:g})}),(0,t.jsx)("div",{className:"flex justify-end pt-2 border-t border-zinc-800/50",children:(0,t.jsxs)("button",{onClick:T,disabled:j,className:"bg-zinc-100 text-black px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-white hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 flex items-center gap-2 transition-all shadow-lg shadow-white/5",children:[j?(0,t.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(o,{className:"w-4 h-4"}),"Record"]})})]})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-3 flex-1",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest px-1",children:"History"}),(0,t.jsx)("div",{className:"flex flex-col gap-3",children:N.map(e=>{var a;return(0,t.jsx)(s.default,{href:`/view?id=${e.id}`,className:"block group",children:(0,t.jsxs)("article",{className:"card hover:bg-zinc-800/50 flex justify-between items-center group-hover:border-zinc-700",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-zinc-200 group-hover:text-white transition-colors",children:e.title}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500 font-mono flex items-center gap-2",children:[(a=e.created_at)?new Date(a.toDate()).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"}):"",e.updated_at&&e.created_at?.seconds!==e.updated_at?.seconds&&(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"})]})]}),(0,t.jsx)(x,{className:"w-4 h-4 text-zinc-700 group-hover:text-white group-hover:translate-x-1 transition-all"})]})},e.id)})}),0===N.length&&(0,t.jsx)("div",{className:"text-center text-zinc-700 py-12 text-sm font-mono",children:"No existence recorded yet."})]})]}):(0,t.jsx)("main",{className:"h-screen flex flex-col items-center justify-center p-4 bg-black",children:(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-8 text-center animate-in fade-in duration-700",children:[(0,t.jsx)("div",{className:"inline-flex p-5 rounded-full bg-zinc-900 border border-zinc-800 shadow-xl",children:(0,t.jsx)(d,{className:"text-zinc-400 w-6 h-6"})}),(0,t.jsx)("h1",{className:"text-xl font-medium text-zinc-200 tracking-wider",children:"PROJET IDENTITY"}),(0,t.jsxs)("form",{onSubmit:S,className:"flex flex-col gap-4",children:[(0,t.jsx)("input",{type:"password",required:!0,className:"w-full bg-zinc-900/50 border border-zinc-800 rounded-xl p-4 text-center text-white focus:border-zinc-600 focus:bg-zinc-900 transition-all placeholder-zinc-700",placeholder:"Passcode",value:v,onChange:e=>y(e.target.value)}),(0,t.jsx)("button",{className:"w-full bg-white text-black font-bold p-4 rounded-xl hover:bg-zinc-200 transition-colors shadow-lg shadow-white/5",children:"Unlock System"})]})]})})}e.s(["default",()=>f],52683)},88174,e=>{e.v(t=>Promise.all(["static/chunks/42deda8852a73de0.js","static/chunks/c0a0c0f35d0a8771.css"].map(t=>e.l(t))).then(()=>t(72113)))}]);