(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},30911,37727,e=>{"use strict";var t=e.i(71645);e.i(51718);var a=e.i(18357),s=e.i(59141),l=e.i(18566);function n(e=!1){let[i,r]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0),d=(0,l.useRouter)();return(0,t.useEffect)(()=>{let t=(0,a.onAuthStateChanged)(s.auth,t=>{r(t),o(!1),e&&!t&&d.push("/")});return()=>t()},[e,d]),{user:i,loading:c}}e.s(["formatDate",0,e=>e?new Date(e.toDate()).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"}):"","useAuth",()=>n],30911);let i=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>i],37727)},52683,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(22016);e.i(51718);var l=e.i(18357);e.i(36180);var n=e.i(98925),i=e.i(59141),r=e.i(30911),c=e.i(75254);let o=(0,c.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),d=(0,c.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=(0,c.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),h=(0,c.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var u=e.i(31278),m=e.i(37727);let f=(0,e.i(70703).default)(()=>e.A(88174),{loadableGenerated:{modules:[72113]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-20 flex items-center text-zinc-600",children:"Editor Loading..."})});function p(){let{user:e,loading:c}=(0,r.useAuth)(),[p,b]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[v,w]=(0,a.useState)([]),[y,N]=(0,a.useState)(""),[k,z]=(0,a.useState)(!1),[S,E]=(0,a.useState)(""),[C,T]=(0,a.useState)([]),[A,D]=(0,a.useState)([]),[M,P]=(0,a.useState)([]),[O,R]=(0,a.useState)(null),L=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!e)return;let t=(0,n.query)((0,n.collection)(i.db,"records"),(0,n.orderBy)("created_at","desc"));return(0,n.onSnapshot)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));T(t);let a=new Set;t.forEach(e=>e.tags?.forEach(e=>a.add(e))),P(Array.from(a).sort())})},[e]),(0,a.useEffect)(()=>{O?D(C.filter(e=>e.tags?.includes(O))):D(C)},[O,C]);let _=async()=>{if(g.trim()&&e){z(!0);try{await (0,n.addDoc)((0,n.collection)(i.db,"records"),{uid:e.uid,title:p||"Untitled Knot",content:g,tags:v,created_at:(0,n.serverTimestamp)(),updated_at:(0,n.serverTimestamp)(),status:"active"}),b(""),j(""),w([]),L.current?.setMarkdown("")}catch{alert("저장 실패")}finally{z(!1)}}},K=async e=>{e.preventDefault();try{await (0,l.signInWithEmailAndPassword)(i.auth,"host@email.com",S)}catch{alert("Error")}};return c?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center text-zinc-500",children:(0,t.jsx)(u.Loader2,{className:"animate-spin"})}):e?(0,t.jsxs)("main",{className:"projet-container animate-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center pb-2 border-b border-zinc-800/50",children:[(0,t.jsx)("h1",{className:"text-sm font-bold tracking-[0.3em] text-zinc-100",children:"PROJET"}),(0,t.jsx)("button",{onClick:()=>i.auth.signOut(),className:"text-xs text-zinc-500 hover:text-white transition-colors uppercase tracking-wider",children:"Lock"})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end px-1",children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest",children:"Quick Log"}),(0,t.jsxs)(s.default,{href:"/write",className:"text-xs text-amber-500 hover:text-amber-400 flex items-center gap-1 font-medium transition-colors",children:[(0,t.jsx)(h,{className:"w-3 h-3"})," Expand"]})]}),(0,t.jsxs)("div",{className:"card flex flex-col gap-4 bg-zinc-900/50",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title...",className:"bg-transparent text-lg font-bold text-white placeholder-zinc-700 border-none outline-none p-0",value:p,onChange:e=>b(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[v.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-zinc-800 text-zinc-400 text-xs",children:[e," ",(0,t.jsx)("button",{onClick:()=>w(v.filter(t=>t!==e)),children:(0,t.jsx)(m.X,{className:"w-3 h-3"})})]},e)),(0,t.jsx)("input",{type:"text",placeholder:0===v.length?"Add tags...":"",className:"bg-transparent text-sm text-zinc-400 placeholder-zinc-700 outline-none min-w-20",value:y,onChange:e=>N(e.target.value),onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();let t=y.trim();t&&!v.includes(t)&&w([...v,t]),N("")}else"Backspace"===e.key&&!y&&v.length>0&&w(v.slice(0,-1))}})]}),(0,t.jsx)("div",{className:"min-h-20 -ml-4",children:(0,t.jsx)(f,{ref:L,markdown:g,onChange:j})}),(0,t.jsx)("div",{className:"flex justify-end pt-2 border-t border-zinc-800/50",children:(0,t.jsxs)("button",{onClick:_,disabled:k,className:"bg-zinc-100 text-black px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-white hover:scale-105 disabled:opacity-50 flex items-center gap-2 transition-all shadow-lg shadow-white/5",children:[k?(0,t.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(d,{className:"w-4 h-4"})," Record"]})})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest px-1 mb-3",children:"Notes"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>R(null),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all ${!O?"bg-zinc-200 text-black":"bg-zinc-900 text-zinc-500 hover:bg-zinc-800"}`,children:"All"}),M.map(e=>(0,t.jsxs)("button",{onClick:()=>R(O===e?null:e),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${O===e?"bg-amber-600 border-amber-600 text-white":"bg-transparent border-zinc-800 text-zinc-400 hover:border-zinc-600"}`,children:["# ",e]},e))]})]}),(0,t.jsxs)("section",{className:"flex flex-col gap-3 flex-1",children:[A.map(e=>(0,t.jsx)(s.default,{href:`/view?id=${e.id}`,className:"block group",children:(0,t.jsxs)("article",{className:"card hover:bg-zinc-800/50 flex justify-between items-center group-hover:border-zinc-700",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1.5 overflow-hidden",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-zinc-200 group-hover:text-white transition-colors truncate",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-500 font-mono",children:[(0,t.jsx)("span",{children:(0,r.formatDate)(e.created_at)}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"flex gap-1 ml-2",children:e.tags.slice(0,3).map(e=>(0,t.jsxs)("span",{className:"text-zinc-600",children:["#",e]},e))})]})]}),(0,t.jsx)(x,{className:"w-4 h-4 text-zinc-700 group-hover:text-white group-hover:translate-x-1 transition-all shrink-0"})]})},e.id)),0===A.length&&(0,t.jsx)("div",{className:"text-center text-zinc-700 py-12 text-sm font-mono",children:"No notes found."})]})]}):(0,t.jsx)("main",{className:"h-screen flex flex-col items-center justify-center p-4 bg-black",children:(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-8 text-center animate-in fade-in duration-700",children:[(0,t.jsx)("div",{className:"inline-flex p-5 rounded-full bg-zinc-900 border border-zinc-800 shadow-xl",children:(0,t.jsx)(o,{className:"text-zinc-400 w-6 h-6"})}),(0,t.jsx)("h1",{className:"text-xl font-medium text-zinc-200 tracking-wider",children:"PROJET IDENTITY"}),(0,t.jsxs)("form",{onSubmit:K,className:"flex flex-col gap-4",children:[(0,t.jsx)("input",{type:"password",required:!0,className:"w-full bg-zinc-900/50 border border-zinc-800 rounded-xl p-4 text-center text-white focus:border-zinc-600 focus:bg-zinc-900 transition-all placeholder-zinc-700",placeholder:"Passcode",value:S,onChange:e=>E(e.target.value)}),(0,t.jsx)("button",{className:"w-full bg-white text-black font-bold p-4 rounded-xl hover:bg-zinc-200 transition-colors shadow-lg shadow-white/5",children:"Unlock System"})]})]})})}e.s(["default",()=>p],52683)},88174,e=>{e.v(t=>Promise.all(["static/chunks/42deda8852a73de0.js","static/chunks/c0a0c0f35d0a8771.css"].map(t=>e.l(t))).then(()=>t(72113)))}]);