(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},52683,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(18566),r=e.i(22016);e.i(51718);var l=e.i(18357);e.i(36180);var i=e.i(98925),n=e.i(59141),c=e.i(75254);let d=(0,c.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var o=e.i(56909),x=e.i(31278);let h=(0,c.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),u=(0,c.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),m=(0,e.i(70703).default)(()=>e.A(88174),{loadableGenerated:{modules:[72113]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."})});function g(){(0,s.useRouter)();let[e,c]=(0,a.useState)(null),[g,y]=(0,a.useState)(!0),[b,p]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),[S,C]=(0,a.useState)(""),[P,O]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,l.onAuthStateChanged)(n.auth,e=>{c(e),y(!1)});return()=>e()},[]),(0,a.useEffect)(()=>{if(!e)return;let t=(0,i.query)((0,i.collection)(n.db,"records"),(0,i.orderBy)("created_at","desc")),a=(0,i.onSnapshot)(t,e=>{O(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]);let T=async e=>{e.preventDefault(),y(!0);try{await (0,l.signInWithEmailAndPassword)(n.auth,"your-email@example.com",w)}catch(e){C("코드가 일치하지 않습니다."),y(!1)}},L=async()=>{if(f.trim()&&e){N(!0);try{await (0,i.addDoc)((0,i.collection)(n.db,"records"),{uid:e.uid,title:b||"Untitled Knot",content:f,created_at:(0,i.serverTimestamp)(),updated_at:(0,i.serverTimestamp)(),status:"active"}),p(""),j("")}catch(e){console.error(e),alert("저장 실패")}finally{N(!1)}}};return g?(0,t.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center text-gray-500",children:(0,t.jsx)(x.Loader2,{className:"animate-spin"})}):e?(0,t.jsxs)("main",{className:"min-h-screen max-w-3xl mx-auto p-6 pb-24",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center mb-8 pb-4 border-b border-gray-800",children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-widest text-gray-100",children:"PROJET"}),(0,t.jsx)("button",{onClick:()=>n.auth.signOut(),className:"text-xs text-gray-500 hover:text-white",children:"Lock"})]}),(0,t.jsxs)("section",{className:"mb-12 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsx)("h2",{className:"text-gray-400 text-sm font-bold uppercase",children:"Quick Log"}),(0,t.jsxs)(r.default,{href:"/write",className:"text-xs text-green-500 hover:text-green-400 flex items-center gap-1",children:[(0,t.jsx)(u,{className:"w-3 h-3"})," Full Page Mode"]})]}),(0,t.jsxs)("div",{className:"bg-[#111] border border-gray-800 rounded-lg p-4 space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title of this Knot...",className:"w-full bg-transparent text-xl font-bold text-white placeholder-gray-600 border-b border-gray-800 pb-2 focus:outline-none focus:border-gray-500 transition-colors",value:b,onChange:e=>p(e.target.value)}),(0,t.jsx)("div",{className:"min-h-150px",children:(0,t.jsx)(m,{markdown:f,onChange:j})}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsxs)("button",{onClick:L,disabled:v,className:"bg-white text-black px-4 py-2 rounded text-sm font-bold hover:bg-gray-200 disabled:opacity-50 flex items-center gap-2",children:[v?(0,t.jsx)(x.Loader2,{className:"w-3 h-3 animate-spin"}):(0,t.jsx)(o.Save,{className:"w-3 h-3"}),"Save Knot"]})})]})]}),(0,t.jsxs)("section",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-gray-400 text-sm font-bold uppercase pl-3 border-l-2 border-gray-700",children:"History"}),P.map(e=>{let a;return(0,t.jsxs)("article",{className:"group relative bg-[#0a0a0a] border border-gray-800 rounded-lg p-6 hover:border-gray-600 transition-all",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4 border-b border-gray-800 pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:(a=e.created_at)?new Date(a.toDate()).toLocaleDateString():""})]}),(0,t.jsx)(r.default,{href:`/edit?id=${e.id}`,className:"opacity-0 group-hover:opacity-100 text-gray-500 hover:text-yellow-500 transition-all p-2",children:(0,t.jsx)(h,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"opacity-80",children:(0,t.jsx)(m,{markdown:e.content,readOnly:!0})})]},e.id)})]})]}):(0,t.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-black px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-8 text-center",children:[(0,t.jsx)("div",{className:"mb-4 inline-block rounded-full bg-gray-900 p-4 ring-1 ring-gray-800",children:(0,t.jsx)(d,{className:"text-gray-400"})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-200",children:"Projet: Identity Check"}),(0,t.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,t.jsx)("input",{type:"password",required:!0,className:"w-full bg-gray-900 border-0 rounded p-3 text-white ring-1 ring-gray-800 focus:ring-gray-600",placeholder:"Code",value:w,onChange:e=>k(e.target.value)}),S&&(0,t.jsx)("div",{className:"text-red-500 text-xs",children:S}),(0,t.jsx)("button",{className:"w-full bg-white text-black font-bold p-3 rounded hover:bg-gray-200",children:"Unlock"})]})]})})}e.s(["default",()=>g],52683)},88174,e=>{e.v(t=>Promise.all(["static/chunks/fac2aa90d5f39e2e.js","static/chunks/c0a0c0f35d0a8771.css"].map(t=>e.l(t))).then(()=>t(72113)))}]);