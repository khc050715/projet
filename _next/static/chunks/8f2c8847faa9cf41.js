(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},52683,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(22016);e.i(51718);var r=e.i(18357);e.i(36180);var l=e.i(98925),i=e.i(59141),c=e.i(75254);let n=(0,c.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=e.i(56909),o=e.i(31278);let x=(0,c.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),h=(0,c.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),u=(0,e.i(70703).default)(()=>e.A(88174),{loadableGenerated:{modules:[72113]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."})});function m(){let[e,c]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[y,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[C,P]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,r.onAuthStateChanged)(i.auth,e=>{c(e),g(!1)});return()=>e()},[]),(0,a.useEffect)(()=>{if(!e)return;let t=(0,l.query)((0,l.collection)(i.db,"records"),(0,l.orderBy)("created_at","desc")),a=(0,l.onSnapshot)(t,e=>{P(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]);let M=async e=>{e.preventDefault(),g(!0);try{await (0,r.signInWithEmailAndPassword)(i.auth,"your-email@example.com",w)}catch{S("코드가 일치하지 않습니다."),g(!1)}},T=async()=>{if(b.trim()&&e){v(!0);try{await (0,l.addDoc)((0,l.collection)(i.db,"records"),{uid:e.uid,title:y||"Untitled Knot",content:b,created_at:(0,l.serverTimestamp)(),updated_at:(0,l.serverTimestamp)(),status:"active"}),p(""),f("")}catch{alert("Error")}finally{v(!1)}}};return m?(0,t.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center text-gray-500",children:(0,t.jsx)(o.Loader2,{className:"animate-spin"})}):e?(0,t.jsxs)("main",{className:"min-h-screen max-w-3xl mx-auto p-6 pb-24",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center mb-8 pb-4 border-b border-gray-800",children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-widest text-gray-100",children:"PROJET"}),(0,t.jsx)("button",{onClick:()=>i.auth.signOut(),className:"text-xs text-gray-500 hover:text-white",children:"Lock"})]}),(0,t.jsxs)("section",{className:"mb-12 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsx)("h2",{className:"text-gray-400 text-sm font-bold uppercase",children:"Quick Log"}),(0,t.jsxs)(s.default,{href:"/write",className:"text-xs text-green-500 hover:text-green-400 flex items-center gap-1",children:[(0,t.jsx)(x,{className:"w-3 h-3"})," Full Page"]})]}),(0,t.jsxs)("div",{className:"bg-[#111] border border-gray-800 rounded-lg p-4 space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title...",className:"w-full bg-transparent text-xl font-bold text-white placeholder-gray-600 border-b border-gray-800 pb-2 focus:outline-none focus:border-gray-500 transition-colors",value:y,onChange:e=>p(e.target.value)}),(0,t.jsx)("div",{className:"min-h-25",children:(0,t.jsx)(u,{markdown:b,onChange:f})}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsxs)("button",{onClick:T,disabled:j,className:"bg-white text-black px-4 py-2 rounded text-sm font-bold hover:bg-gray-200 disabled:opacity-50 flex items-center gap-2",children:[j?(0,t.jsx)(o.Loader2,{className:"w-3 h-3 animate-spin"}):(0,t.jsx)(d.Save,{className:"w-3 h-3"})," Save"]})})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-gray-400 text-sm font-bold uppercase pl-3 border-l-2 border-gray-700",children:"History"}),0===C.length&&(0,t.jsx)("div",{className:"text-center text-gray-600 py-10",children:"No records yet."}),C.map(e=>{let a;return(0,t.jsx)(s.default,{href:`/view?id=${e.id}`,className:"block group",children:(0,t.jsxs)("article",{className:"bg-[#0a0a0a] border border-gray-800 rounded-lg p-5 hover:border-gray-500 hover:bg-[#111] transition-all flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 group-hover:text-white transition-colors",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:(a=e.created_at)?new Date(a.toDate()).toLocaleDateString():""})]}),(0,t.jsx)(h,{className:"w-4 h-4 text-gray-600 group-hover:text-white transition-colors"})]})},e.id)})]})]}):(0,t.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-black px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md space-y-8 text-center",children:[(0,t.jsx)("div",{className:"mb-4 inline-block rounded-full bg-gray-900 p-4 ring-1 ring-gray-800",children:(0,t.jsx)(n,{className:"text-gray-400"})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-200",children:"Projet: Identity Check"}),(0,t.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,t.jsx)("input",{type:"password",required:!0,className:"w-full bg-gray-900 border-0 rounded p-3 text-white ring-1 ring-gray-800 focus:ring-gray-600",placeholder:"Code",value:w,onChange:e=>N(e.target.value)}),k&&(0,t.jsx)("div",{className:"text-red-500 text-xs",children:k}),(0,t.jsx)("button",{className:"w-full bg-white text-black font-bold p-3 rounded hover:bg-gray-200",children:"Unlock"})]})]})})}e.s(["default",()=>m],52683)},88174,e=>{e.v(t=>Promise.all(["static/chunks/fac2aa90d5f39e2e.js","static/chunks/c0a0c0f35d0a8771.css"].map(t=>e.l(t))).then(()=>t(72113)))}]);